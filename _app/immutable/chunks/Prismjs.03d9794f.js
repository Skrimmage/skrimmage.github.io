import{B as U,f as G,i as _,a as m,s as F,b}from"./inferColumnTypes.fef48927.js";import{Q as y,S as c,i as p,s as M,e as o,C as S,l as C,n as R,D as f,m as a,p as s,r as h,v as O,w as L,h as l,o as u}from"./index.bcaf0f15.js";import{C as H}from"./globalContexts.09a53420.js";import{P as d}from"./ecStat.c2eeb13c.js";function Y(e,...E){if(typeof e=="function")throw new Error("You must supply the data as the first argument to tidy()");let t=e;for(const r of E)r&&(t=r(t));return t}function w(e){return t=>{const r=[];for(const T of t){const I={...T};for(const n in e){const i=e[n],N=typeof i=="function"?i(I):i;I[n]=N}r.push(I)}return r}}function P(e){if(e&&typeof e=="string"){let E=e.split(" ");e.includes(":")||(e=e+"T00:00:00"),E.length>2&&(e=E[0]+" "+E[1]);const t=/\.([^\s]+)/;e=e.replace(t,""),e=e.replace("Z",""),e=e.replace(" ","T")}return e}function J(e,E){return e=Y(e,w({[E]:t=>t[E]?new Date(P(t[E])):null})),e}const x="axis",A="value",g=()=>{var e;return((e=y(H))==null?void 0:e.getCustomFormats())||[]},$=(e,E,t)=>{let r=K(e);if(E.evidenceType==="string")return;if(r){let I=g(),n=[...U,...I].find(i=>{var N;return((N=i.formatTag)==null?void 0:N.toLowerCase())===(r==null?void 0:r.toLowerCase())});if(n)return n}let T=G(e,E,t);if(T)return T};function ee(e,E=void 0){let t=e,r=g(),T=[...U,...r].find(n=>{var i;return((i=n.formatTag)==null?void 0:i.toLowerCase())===(t==null?void 0:t.toLowerCase())}),I={};return T||(I={formatTag:"custom",formatCode:t},E&&(I.valueType=E),I)}const Ee=(e,E=void 0,t=void 0)=>{try{return B(e,E,t,A)}catch(r){return console.warn(`Unexpected error calling applyFormatting(${e}, ${E}, ${A}, ${t}). Error=${r}`),e}},te=(e,E)=>{let t=e;if(e&&(E!=null&&E.formatTag)){let r=e.toLowerCase().lastIndexOf(`_${E.formatTag.toLowerCase()}`),T="";r>0&&(typeof(E==null?void 0:E.titleTagReplacement)=="string"&&(T=E.titleTagReplacement),t=e.substring(0,r)+T)}return t},V=e=>{switch(e){case"number":return 1234;case"date":return"2022-01-03";default:return}},re=e=>{var r,T;let t=((r=e.userInput)==null?void 0:r.trim())||e.exampleInput||V(e.valueType);if(t)try{let I;if(e.valueType==="number"){let n=Number(t);I={min:n,max:n,median:n,maxDecimals:((T=n.toString().split(".")[1])==null?void 0:T.length)||0,unitType:"number"}}return B(t,e,I,A)}catch{}return""};function B(e,E=void 0,t=void 0,r=A){if(e==null)return"-";let T;if(E)try{let I=X(E,r),n;try{E.valueType==="date"&&typeof e=="string"?n=new Date(P(e)):E.valueType==="number"&&typeof e!="number"&&!Number.isNaN(e)?n=Number(e):n=e}catch{n=e}if(_(E,I))try{T=m(n,E,t)}catch(i){console.warn(`Unexpected error applying auto formatting. Error=${i}`)}else T=F.format(I,n)}catch(I){console.warn(`Unexpected error applying formatting ${I}`)}return T===void 0&&(T=b(e)),T}function X(e,E=A){return typeof e=="string"?e:E===x&&(e!=null&&e.axisFormatCode)?e.axisFormatCode:e==null?void 0:e.formatCode}function K(e){let E=e.toLowerCase(),t=E.lastIndexOf("_");if(t>0)return E.substr(t).replace("_","")}function v(e){let E,t,r;return{c(){E=o("span"),t=S("svg"),r=S("path"),this.h()},l(T){E=C(T,"SPAN",{"aria-expanded":!0,class:!0});var I=R(E);t=f(I,"svg",{viewBox:!0,width:!0,height:!0,class:!0});var n=R(t);r=f(n,"path",{fill:!0,"fill-rule":!0,d:!0}),R(r).forEach(a),n.forEach(a),I.forEach(a),this.h()},h(){s(r,"fill",e[1]),s(r,"fill-rule","evenodd"),s(r,"d","M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"),s(t,"viewBox","0 0 16 16"),s(t,"width",e[2]),s(t,"height",e[2]),s(t,"class","svelte-c6mrxw"),s(E,"aria-expanded",e[0]),s(E,"class","svelte-c6mrxw")},m(T,I){h(T,E,I),O(E,t),O(t,r)},p(T,[I]){I&2&&s(r,"fill",T[1]),I&4&&s(t,"width",T[2]),I&4&&s(t,"height",T[2]),I&1&&s(E,"aria-expanded",T[0])},i:L,o:L,d(T){T&&a(E)}}}function W(e,E,t){let{toggled:r=!1}=E,{color:T="#2d2d2d"}=E,{size:I=10}=E;return e.$$set=n=>{"toggled"in n&&t(0,r=n.toggled),"color"in n&&t(1,T=n.color),"size"in n&&t(2,I=n.size)},[r,T,I]}class Te extends c{constructor(E){super(),p(this,E,W,v,M,{toggled:0,color:1,size:2})}}const D={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};function z(e){let E,t,r,T=d.highlight(e[0],D)+"",I;return{c(){E=o("pre"),t=l("  "),r=o("code"),I=l(`
`),this.h()},l(n){E=C(n,"PRE",{class:!0});var i=R(E);t=u(i,"  "),r=C(i,"CODE",{class:!0});var N=R(r);N.forEach(a),I=u(i,`
`),i.forEach(a),this.h()},h(){s(r,"class","language-sql svelte-isi8vj"),s(E,"class","text-sm max-h-56 overflow-auto svelte-isi8vj")},m(n,i){h(n,E,i),O(E,t),O(E,r),r.innerHTML=T,O(E,I)},p(n,[i]){i&1&&T!==(T=d.highlight(n[0],D)+"")&&(r.innerHTML=T)},i:L,o:L,d(n){n&&a(E)}}}function k(e,E,t){let{code:r=""}=E;return e.$$set=T=>{"code"in T&&t(0,r=T.code)},[r]}class ne extends c{constructor(E){super(),p(this,E,k,z,M,{code:0})}}export{Te as C,ne as P,te as a,re as b,J as c,V as d,Ee as f,ee as g,$ as l,Y as t};
