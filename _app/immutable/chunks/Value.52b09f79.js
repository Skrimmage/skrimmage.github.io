import{S as P,i as j,s as C,f as E,r as S,w as N,m as d,e as y,h as p,d as V,l as b,n as w,o as _,j as O,p as k,v as i,J as v}from"./index.bcaf0f15.js";import{g as q}from"./QueryViewer.076dd75f.js";import{c as B,g as F,f as A}from"./Prismjs.4053f240.js";import{c as I,s as R}from"./checkInputs.29b04e93.js";import"./ecStat.a73d296c.js";function T(f){let t,r,l,a,e,o;return{c(){t=y("span"),r=y("span"),l=p("error"),a=V(),e=y("span"),o=p(f[1]),this.h()},l(c){t=b(c,"SPAN",{class:!0});var n=w(t);r=b(n,"SPAN",{class:!0});var m=w(r);l=_(m,"error"),m.forEach(d),a=O(n),e=b(n,"SPAN",{class:!0});var g=w(e);o=_(g,f[1]),g.forEach(d),n.forEach(d),this.h()},h(){k(r,"class","inline font-sans font-medium text-xs text-red-600"),k(e,"class","hidden text-white font-sans group-hover:inline absolute -top-1 left-[105%] text-sm z-10 px-2 py-1 bg-gray-800/80 leading-relaxed min-w-[150px] max-w-[400px] rounded-md"),k(t,"class","group inline-flex items-center relative cursor-help cursor-helpfont-sans px-1 border border-red-200 py-[1px] bg-red-50 rounded")},m(c,n){S(c,t,n),i(t,r),i(r,l),i(t,a),i(t,e),i(e,o)},p(c,n){n&2&&v(o,c[1])},d(c){c&&d(t)}}}function z(f){let t,r=A(f[3],f[2])+"",l;return{c(){t=y("span"),l=p(r)},l(a){t=b(a,"SPAN",{});var e=w(t);l=_(e,r),e.forEach(d)},m(a,e){S(a,t,e),i(t,l)},p(a,e){e&12&&r!==(r=A(a[3],a[2])+"")&&v(l,r)},d(a){a&&d(t)}}}function D(f){let t,r,l,a,e,o;return{c(){t=y("span"),r=p("["),l=p(f[0]),a=p("]"),e=y("span"),o=p("Placeholder: no data currently referenced."),this.h()},l(c){t=b(c,"SPAN",{class:!0});var n=w(t);r=_(n,"["),l=_(n,f[0]),a=_(n,"]"),e=b(n,"SPAN",{class:!0});var m=w(e);o=_(m,"Placeholder: no data currently referenced."),m.forEach(d),n.forEach(d),this.h()},h(){k(e,"class","error-msg svelte-11norvs"),k(t,"class","placeholder svelte-11norvs")},m(c,n){S(c,t,n),i(t,r),i(t,l),i(t,a),i(t,e),i(e,o)},p(c,n){n&1&&v(l,c[0])},d(c){c&&d(t)}}}function J(f){let t;function r(e,o){return e[0]?D:e[1]?T:z}let l=r(f),a=l(f);return{c(){a.c(),t=E()},l(e){a.l(e),t=E()},m(e,o){a.m(e,o),S(e,t,o)},p(e,[o]){l===(l=r(e))&&a?a.p(e,o):(a.d(1),a=l(e),a&&(a.c(),a.m(t.parentNode,t)))},i:N,o:N,d(e){a.d(e),e&&d(t)}}}function G(f,t,r){let{data:l=null}=t,{row:a=0}=t,{column:e=null}=t,{value:o=null}=t,{placeholder:c=null}=t,{fmt:n=void 0}=t,m,g,x,h;return f.$$set=s=>{"data"in s&&r(4,l=s.data),"row"in s&&r(6,a=s.row),"column"in s&&r(5,e=s.column),"value"in s&&r(7,o=s.value),"placeholder"in s&&r(0,c=s.placeholder),"fmt"in s&&r(8,n=s.fmt)},f.$$.update=()=>{if(f.$$.dirty&160&&r(5,e=e??o),f.$$.dirty&883)try{if(r(1,x=void 0),!c)if(l){if(typeof l=="string")throw Error(`Received: data=${l}, expected: data={${l}}`);if(Array.isArray(l)||r(4,l=[l]),isNaN(a))throw Error("row must be a number (row="+a+")");try{Object.keys(l[a])[0]}catch{throw Error("Row "+a+" does not exist in the dataset")}r(5,e=e??Object.keys(l[a])[0]),I(l,[e]),r(9,h=q(l,"array"));let s=h.filter(u=>u.type==="date");if(s=s.map(u=>u.id),s.length>0)for(let u=0;u<s.length;u++)r(4,l=B(l,s[u]));r(3,g=l[a][e]),r(9,h=h.filter(u=>u.id===e)),n?r(2,m=F(n,h[0].format.valueType)):r(2,m=h[0].format)}else throw Error("No data provided. If you referenced a query result, check that the name is correct.")}catch(s){if(r(1,x=s.message),R)throw x}f.$$.dirty&160&&o&&e&&console.warn('Both "value" and "column" were supplied as props to Value. "value" will be ignored.')},[c,x,m,g,l,e,a,o,n,h]}class U extends P{constructor(t){super(),j(this,t,G,J,C,{data:4,row:6,column:5,value:7,placeholder:0,fmt:8})}}export{U as V};
