import{S as oe,i as ae,s as le,a as y,e as w,b as Y,t as Z,G as H,c as b,h as ce,d as E,f as o,g as X,j as ee,H as j,k as $,m as _,n as G,I as P,z as M,B as R,C as me,J as Q,p as te,q as _e,r as re,u as pe,U as de,o as x,A as $e,V as ye}from"./index.fa6138d3.js";import{p as be}from"./stores.decb5e55.js";import{s as ke,Q as ie,p as he,r as se,d as we}from"./index.5727bd29.js";import{w as Ee}from"./paths.f67a539c.js";import{I as Te,C as qe}from"./globalContexts.8bcf5d41.js";import{p as ne}from"./profile.e7706513.js";import{L as Ce,a as J}from"./Links.6c0b2e90.js";import"./VennDiagram.svelte_svelte_type_style_lang.0f477547.js";import{D as Ae}from"./DataTable.fecc8703.js";import{Q as Me}from"./QueryViewer.74fac88e.js";import{C as W}from"./Column.4aa713a2.js";function Fe(l){let r,s=m.title+"",t;return{c(){r=w("h1"),t=Z(s),this.h()},l(f){r=E(f,"H1",{class:!0});var u=X(r);t=ee(u,s),u.forEach(o),this.h()},h(){$(r,"class","title")},m(f,u){_(f,r,u),G(r,t)},p:x,d(f){f&&o(r)}}}function ge(l){return{c(){this.h()},l(r){this.h()},h(){document.title="Evidence"},m:x,p:x,d:x}}function ve(l){let r,s,t,f,u;return document.title=r=m.title,{c(){s=y(),t=w("meta"),f=y(),u=w("meta"),this.h()},l(n){s=b(n),t=E(n,"META",{property:!0,content:!0}),f=b(n),u=E(n,"META",{name:!0,content:!0}),this.h()},h(){var n,e;$(t,"property","og:title"),$(t,"content",((n=m.og)==null?void 0:n.title)??m.title),$(u,"name","twitter:title"),$(u,"content",((e=m.og)==null?void 0:e.title)??m.title)},m(n,e){_(n,s,e),_(n,t,e),_(n,f,e),_(n,u,e)},p(n,e){e&0&&r!==(r=m.title)&&(document.title=r)},d(n){n&&o(s),n&&o(t),n&&o(f),n&&o(u)}}}function Se(l){var u,n;let r,s,t=(m.description||((u=m.og)==null?void 0:u.description))&&Ne(),f=((n=m.og)==null?void 0:n.image)&&Re();return{c(){t&&t.c(),r=y(),f&&f.c(),s=Y()},l(e){t&&t.l(e),r=b(e),f&&f.l(e),s=Y()},m(e,c){t&&t.m(e,c),_(e,r,c),f&&f.m(e,c),_(e,s,c)},p(e,c){var T,h;(m.description||(T=m.og)!=null&&T.description)&&t.p(e,c),(h=m.og)!=null&&h.image&&f.p(e,c)},d(e){t&&t.d(e),e&&o(r),f&&f.d(e),e&&o(s)}}}function Ne(l){let r,s,t,f,u;return{c(){r=w("meta"),s=y(),t=w("meta"),f=y(),u=w("meta"),this.h()},l(n){r=E(n,"META",{name:!0,content:!0}),s=b(n),t=E(n,"META",{property:!0,content:!0}),f=b(n),u=E(n,"META",{name:!0,content:!0}),this.h()},h(){var n,e,c;$(r,"name","description"),$(r,"content",m.description??((n=m.og)==null?void 0:n.description)),$(t,"property","og:description"),$(t,"content",((e=m.og)==null?void 0:e.description)??m.description),$(u,"name","twitter:description"),$(u,"content",((c=m.og)==null?void 0:c.description)??m.description)},m(n,e){_(n,r,e),_(n,s,e),_(n,t,e),_(n,f,e),_(n,u,e)},p:x,d(n){n&&o(r),n&&o(s),n&&o(t),n&&o(f),n&&o(u)}}}function Re(l){let r,s,t;return{c(){r=w("meta"),s=y(),t=w("meta"),this.h()},l(f){r=E(f,"META",{property:!0,content:!0}),s=b(f),t=E(f,"META",{name:!0,content:!0}),this.h()},h(){var f,u;$(r,"property","og:image"),$(r,"content",(f=m.og)==null?void 0:f.image),$(t,"name","twitter:image"),$(t,"content",(u=m.og)==null?void 0:u.image)},m(f,u){_(f,r,u),_(f,s,u),_(f,t,u)},p:x,d(f){f&&o(r),f&&o(s),f&&o(t)}}}function fe(l){let r,s;return r=new Me({props:{queryID:"current_races",queryResult:l[1]}}),{c(){H(r.$$.fragment)},l(t){j(r.$$.fragment,t)},m(t,f){P(r,t,f),s=!0},p(t,f){const u={};f&2&&(u.queryResult=t[1]),r.$set(u)},i(t){s||(M(r.$$.fragment,t),s=!0)},o(t){R(r.$$.fragment,t),s=!1},d(t){Q(r,t)}}}function Ie(l){let r,s,t,f,u,n;return r=new W({props:{id:"name",title:"Name"}}),t=new W({props:{id:"date",title:"Date"}}),u=new W({props:{id:"url",title:"Wikipedia",contentType:"link",openInNewTab:"true"}}),{c(){H(r.$$.fragment),s=y(),H(t.$$.fragment),f=y(),H(u.$$.fragment)},l(e){j(r.$$.fragment,e),s=b(e),j(t.$$.fragment,e),f=b(e),j(u.$$.fragment,e)},m(e,c){P(r,e,c),_(e,s,c),P(t,e,c),_(e,f,c),P(u,e,c),n=!0},p:x,i(e){n||(M(r.$$.fragment,e),M(t.$$.fragment,e),M(u.$$.fragment,e),n=!0)},o(e){R(r.$$.fragment,e),R(t.$$.fragment,e),R(u.$$.fragment,e),n=!1},d(e){Q(r,e),e&&o(s),Q(t,e),e&&o(f),Q(u,e)}}}function De(l){let r,s,t,f,u,n;return r=new J({props:{dest:"/sports/F1/drivers/",text:"Drivers"}}),t=new J({props:{dest:"/sports/F1/races/",text:"Races"}}),u=new J({props:{dest:"/sports/F1/circuits/",text:"Circuits"}}),{c(){H(r.$$.fragment),s=y(),H(t.$$.fragment),f=y(),H(u.$$.fragment)},l(e){j(r.$$.fragment,e),s=b(e),j(t.$$.fragment,e),f=b(e),j(u.$$.fragment,e)},m(e,c){P(r,e,c),_(e,s,c),P(t,e,c),_(e,f,c),P(u,e,c),n=!0},p:x,i(e){n||(M(r.$$.fragment,e),M(t.$$.fragment,e),M(u.$$.fragment,e),n=!0)},o(e){R(r.$$.fragment,e),R(t.$$.fragment,e),R(u.$$.fragment,e),n=!1},d(e){Q(r,e),e&&o(s),Q(t,e),e&&o(f),Q(u,e)}}}function He(l){let r,s,t,f,u,n,e,c,T,h,I,F,C,A,L,D,O,g,U,v=typeof m<"u"&&m.title&&m.hide_title!==!0&&Fe();function V(i,a){return typeof m<"u"&&m.title?ve:ge}let q=V()(l),S=typeof m=="object"&&Se(),p=l[1]&&fe(l);return h=new Ae({props:{data:l[1],search:"true",link:"race_link",rows:"all",$$slots:{default:[Ie]},$$scope:{ctx:l}}}),g=new Ce({props:{$$slots:{default:[De]},$$scope:{ctx:l}}}),{c(){v&&v.c(),r=y(),q.c(),s=w("meta"),t=w("meta"),S&&S.c(),f=Y(),u=y(),n=w("h2"),e=Z("Current Schedule"),c=y(),p&&p.c(),T=y(),H(h.$$.fragment),I=y(),F=w("p"),C=w("a"),A=Z("All historical races"),L=y(),D=w("hr"),O=y(),H(g.$$.fragment),this.h()},l(i){v&&v.l(i),r=b(i);const a=ce("svelte-1j2izld",document.head);q.l(a),s=E(a,"META",{name:!0,content:!0}),t=E(a,"META",{name:!0,content:!0}),S&&S.l(a),f=Y(),a.forEach(o),u=b(i),n=E(i,"H2",{class:!0});var d=X(n);e=ee(d,"Current Schedule"),d.forEach(o),c=b(i),p&&p.l(i),T=b(i),j(h.$$.fragment,i),I=b(i),F=E(i,"P",{class:!0});var k=X(F);C=E(k,"A",{href:!0,class:!0});var N=X(C);A=ee(N,"All historical races"),N.forEach(o),k.forEach(o),L=b(i),D=E(i,"HR",{class:!0}),O=b(i),j(g.$$.fragment,i),this.h()},h(){$(s,"name","twitter:card"),$(s,"content","summary"),$(t,"name","twitter:site"),$(t,"content","@evidence_dev"),$(n,"class","markdown"),$(C,"href","./historical_races"),$(C,"class","markdown"),$(F,"class","markdown"),$(D,"class","markdown")},m(i,a){v&&v.m(i,a),_(i,r,a),q.m(document.head,null),G(document.head,s),G(document.head,t),S&&S.m(document.head,null),G(document.head,f),_(i,u,a),_(i,n,a),G(n,e),_(i,c,a),p&&p.m(i,a),_(i,T,a),P(h,i,a),_(i,I,a),_(i,F,a),G(F,C),G(C,A),_(i,L,a),_(i,D,a),_(i,O,a),P(g,i,a),U=!0},p(i,[a]){typeof m<"u"&&m.title&&m.hide_title!==!0&&v.p(i,a),q.p(i,a),typeof m=="object"&&S.p(i,a),i[1]?p?(p.p(i,a),a&2&&M(p,1)):(p=fe(i),p.c(),M(p,1),p.m(T.parentNode,T)):p&&($e(),R(p,1,1,()=>{p=null}),me());const d={};a&2&&(d.data=i[1]),a&4194304&&(d.$$scope={dirty:a,ctx:i}),h.$set(d);const k={};a&4194304&&(k.$$scope={dirty:a,ctx:i}),g.$set(k)},i(i){U||(M(p),M(h.$$.fragment,i),M(g.$$.fragment,i),U=!0)},o(i){R(p),R(h.$$.fragment,i),R(g.$$.fragment,i),U=!1},d(i){v&&v.d(i),i&&o(r),q.d(i),o(s),o(t),S&&S.d(i),o(f),i&&o(u),i&&o(n),i&&o(c),p&&p.d(i),i&&o(T),Q(h,i),i&&o(I),i&&o(F),i&&o(L),i&&o(D),i&&o(O),Q(g,i)}}}const m={title:"F1 Races"};function je(l,...r){return!!r.some(s=>s==null?void 0:s.__unset)}function Pe(l,r,s){var i,a;let t,f,u,n,e,c,T=x,h=()=>(T(),T=ye(q,d=>s(8,c=d)),q),I,F;te(l,be,d=>s(9,I=d)),te(l,se,d=>s(17,F=d)),l.$$.on_destroy.push(()=>T());let{data:C}=r,{data:A={},customFormattingSettings:L,__db:D,inputs:O}=C;_e(se,F="1f7500c4898a4b5aed65d0827cfdc49d",F);let g=Ee(O);re(Te,g),pe(g.subscribe(d=>O=d)),re(qe,{getCustomFormats:()=>L.customFormats||[]});const U=(d,k)=>ne(D.query,d,{query_name:k});ke(U);const v=()=>{};let V=!1;(i=import.meta)!=null&&i.hot&&(void 0).on("vite:afterUpdate",()=>{V=!0,ie.emptyCache()}),I.params,(a=import.meta)!=null&&a.hot&&(void 0).on("evidence:queryChange",({queryId:d,content:k})=>{let N=[];if(d||N.push("Malformed event: Missing queryId"),k||N.push("Malformed event: Missing content"),N.length){console.warn("Failed to update query on serverside change!",N.join(`
`));return}d==="current_races"&&s(6,t=k)});let z;de(()=>s(4,z=t));let q;const S=()=>{const d=()=>{let k,N;try{if(n||V)k=void 0,N=void 0;else if(A.current_races){if(A.current_races instanceof Error)throw A.current_races;k=A.current_races}else k=ne(D.query,t,{query_name:"current_races"})}catch(ue){k=[],N=ue}const K=ie.create(t,U,"current_races",{scoreNotifier:v,initialData:k,initialError:N,noResolve:f});let B;K.loaded||(B=K.fetch()),q&&B instanceof Promise?B.then(()=>h(s(0,q=K))):h(s(0,q=K))};return d(),we(d,500)};let p;return l.$$set=d=>{"data"in d&&s(2,C=d.data)},l.$$.update=()=>{l.$$.dirty&4&&s(3,{data:A={},customFormattingSettings:L,__db:D}=C,A),l.$$.dirty&8&&he.set(Object.keys(A).length>0),l.$$.dirty&512&&I.params,l.$$.dirty&80&&(z||s(4,z=t)),l.$$.dirty&64&&s(7,u=t),l.$$.dirty&144&&(n=u!==z),l.$$.dirty&96&&typeof p>"u"&&s(5,p=S()),l.$$.dirty&96&&p(),l.$$.dirty&40,l.$$.dirty&256&&s(1,e=c)},s(6,t=`select *,
'./' || year || '_' || REPLACE(name, ' ', '_') as race_link
from f1.races
where year = 2023
order by date;`),f=je`select *,
'./' || year || '_' || REPLACE(name, ' ', '_') as race_link
from f1.races
where year = 2023
order by date;`,[q,e,C,A,z,p,t,u,c,I]}class Be extends oe{constructor(r){super(),ae(this,r,Pe,He,le,{data:2})}}export{Be as default};
