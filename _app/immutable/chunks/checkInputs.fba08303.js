import{S as ye,i as we,s as ke,f as _e,q as D,t as j,O as ie,b as B,M as re,m as c,A as Ie,H as Le,c as ct,e as k,h as U,d as R,l as T,n as y,o as V,j as N,p as _,a4 as me,r as b,W as te,a5 as dt,I as z,u as ht,g as _t,a as mt,X as oe,Y as x,B as qe,C as je,v as le,J as ae,K as ue,R as A,L as fe,a7 as tt,F as ge,N as ce,$ as Ue,a0 as lt,a1 as pt,w as Te,U as bt,a2 as vt,a3 as gt,x as Ve}from"./index.5c7e9c86.js";import{f as Me,b as yt,a as nt,s as ne,t as wt}from"./ecStat.040219d2.js";import{c as kt,d as Tt}from"./inferColumnTypes.b7590180.js";import{a as Et,t as it,l as Oe,f as he,C as rt,P as st}from"./Prismjs.243b181e.js";import{w as Qe}from"./paths.b217a74b.js";function Re(n){let e,t,l,i,r,s,o,a,u,f;const m=n[7].default,h=ct(m,n,n[6],null),p=h||Dt();return{c(){e=k("div"),t=k("button"),l=k("span"),i=U(n[1]),r=R(),p&&p.c(),this.h()},l(g){e=T(g,"DIV",{});var d=y(e);t=T(d,"BUTTON",{type:!0,"aria-label":!0,class:!0});var S=y(t);l=T(S,"SPAN",{});var Q=y(l);i=V(Q,n[1]),Q.forEach(c),r=N(S),p&&p.l(S),S.forEach(c),d.forEach(c),this.h()},h(){_(t,"type","button"),_(t,"aria-label",n[1]),_(t,"class",s=me(n[4].class)+" svelte-p80uux")},m(g,d){D(g,e,d),b(e,t),b(t,l),b(l,i),b(t,r),p&&p.m(t,null),a=!0,u||(f=te(t,"click",function(){dt(n[3](n[0]))&&n[3](n[0]).apply(this,arguments)}),u=!0)},p(g,d){n=g,(!a||d&2)&&z(i,n[1]),h&&h.p&&(!a||d&64)&&ht(h,m,n,n[6],a?mt(m,n[6],d,null):_t(n[6]),null),(!a||d&2)&&_(t,"aria-label",n[1]),(!a||d&16&&s!==(s=me(n[4].class)+" svelte-p80uux"))&&_(t,"class",s)},i(g){a||(j(p,g),g&&oe(()=>{o||(o=x(e,Me,{duration:200},!0)),o.run(1)}),a=!0)},o(g){B(p,g),g&&(o||(o=x(e,Me,{duration:200},!1)),o.run(0)),a=!1},d(g){g&&c(e),p&&p.d(g),g&&o&&o.end(),u=!1,f()}}}function Dt(n){let e,t;return{c(){e=qe("svg"),t=qe("path"),this.h()},l(l){e=je(l,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var i=y(e);t=je(i,"path",{d:!0}),y(t).forEach(c),i.forEach(c),this.h()},h(){_(t,"d","M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 9l-5 5-5-5M12 12.8V2.5"),_(e,"width","12"),_(e,"height","12"),_(e,"viewBox","0 0 24 24"),_(e,"fill","none"),_(e,"stroke-width","2"),_(e,"stroke-linecap","round"),_(e,"stroke-linejoin","round")},m(l,i){D(l,e,i),b(e,t)},p:le,d(l){l&&c(e)}}}function Ct(n){let e,t,l=n[2]&&Re(n);return{c(){l&&l.c(),e=_e()},l(i){l&&l.l(i),e=_e()},m(i,r){l&&l.m(i,r),D(i,e,r),t=!0},p(i,[r]){i[2]?l?(l.p(i,r),r&4&&j(l,1)):(l=Re(i),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(ie(),B(l,1,1,()=>{l=null}),re())},i(i){t||(j(l),t=!0)},o(i){B(l),t=!1},d(i){l&&l.d(i),i&&c(e)}}}function St(n,e,t){let{$$slots:l={},$$scope:i}=e,{data:r}=e,{queryID:s}=e,{text:o="Download"}=e,{display:a}=e,{downloadData:u=f=>{const m={fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,filename:s??"evidence_download",useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},h=JSON.parse(JSON.stringify(f));new yt.ExportToCsv(m).generateCsv(h)}}=e;return n.$$set=f=>{t(4,e=Ie(Ie({},e),Le(f))),"data"in f&&t(0,r=f.data),"queryID"in f&&t(5,s=f.queryID),"text"in f&&t(1,o=f.text),"display"in f&&t(2,a=f.display),"downloadData"in f&&t(3,u=f.downloadData),"$$scope"in f&&t(6,i=f.$$scope)},e=Le(e),[r,o,a,u,e,s,i,l]}class It extends ye{constructor(e){super(),we(this,e,St,Ct,ke,{data:0,queryID:5,text:1,display:2,downloadData:3})}}function Lt(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function*qt(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let l of n)(l=e(l,++t,n))!=null&&(l=+l)>=l&&(yield l)}}function Ee(n,e){let t;if(e===void 0)for(const l of n)l!=null&&(t<l||t===void 0&&l>=l)&&(t=l);else{let l=-1;for(let i of n)(i=e(i,++l,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function De(n,e){let t;if(e===void 0)for(const l of n)l!=null&&(t>l||t===void 0&&l>=l)&&(t=l);else{let l=-1;for(let i of n)(i=e(i,++l,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function ot(n,e,t=0,l=n.length-1,i=Lt){for(;l>t;){if(l-t>600){const a=l-t+1,u=e-t+1,f=Math.log(a),m=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*m*(a-m)/a)*(u-a/2<0?-1:1),p=Math.max(t,Math.floor(e-u*m/a+h)),g=Math.min(l,Math.floor(e+(a-u)*m/a+h));ot(n,e,p,g,i)}const r=n[e];let s=t,o=l;for(ve(n,t,e),i(n[l],r)>0&&ve(n,t,l);s<o;){for(ve(n,s,o),++s,--o;i(n[s],r)<0;)++s;for(;i(n[o],r)>0;)--o}i(n[t],r)===0?ve(n,t,o):(++o,ve(n,o,l)),o<=e&&(t=o+1),e<=o&&(l=o-1)}return n}function ve(n,e,t){const l=n[e];n[e]=n[t],n[t]=l}function jt(n,e,t){if(n=Float64Array.from(qt(n,t)),!!(l=n.length)){if((e=+e)<=0||l<2)return De(n);if(e>=1)return Ee(n);var l,i=(l-1)*e,r=Math.floor(i),s=Ee(ot(n,r).subarray(0,r+1)),o=De(n.subarray(r+1));return s+(o-s)*(i-r)}}function Ut(n,e){return jt(n,.5,e)}function at(n,e){return l=>{e=e??{};const i={},r=Object.keys(n);for(const s of r)i[s]=n[s](l);if(e.rest&&l.length){const s=Object.keys(l[0]);for(const o of s)r.includes(o)||(i[o]=e.rest(o)(l))}return[i]}}function ut(n){const e=typeof n=="function"?n:t=>t[n];return t=>De(t,e)}function ft(n){const e=typeof n=="function"?n:t=>t[n];return t=>Ee(t,e)}function Vt(n){const e=typeof n=="function"?n:t=>t[n];return t=>Ut(t,e)}function Ne(n,e){let t=Et(n,e),l=["id","gdp"],i=["of","the","and","in","on"];function r(s){return s.replace(/\S*/g,function(o){return!l.includes(o)&&!i.includes(o)?o.charAt(0).toUpperCase()+o.substr(1).toLowerCase():l.includes(o)?o.toUpperCase():o.toLowerCase()})}return t=r(t.replace(/_/g," ")),t}function Be(n,e){let t;return n?(Array.isArray(n)&&n.length>0?t=n[0]:t=n,t&&t._evidenceColumnTypes?t._evidenceColumnTypes.find(i=>{var r;return((r=i.name)==null?void 0:r.toLowerCase())===(e==null?void 0:e.toLowerCase())}):kt(n).find(i=>{var r;return((r=i.name)==null?void 0:r.toLowerCase())===(e==null?void 0:e.toLowerCase())})):null}function Ae(n,e){let t,l=it(n,at({min:ut(e),max:ft(e),median:Vt(e)}))[0],{maxDecimals:i,unitType:r}=Mt(n.map(s=>s[e]));return t={min:l.min,max:l.max,median:l.median,maxDecimals:i,unitType:r},t}function Fe(n,e){var t=it(n,at({min:ut(e),max:ft(e)}));let l=t[0].min,i=t[0].max;return[l,i]}function Mt(n){var a;let e=0,t=0,l=0,i=0,r=0,s=0,o=0;if(n==null||n.length===0)return{maxDecimals:0,unitType:"unknown"};{for(let m=0;m<n.length;m++){let h=n[m];switch(typeof h){case"undefined":e++;break;case"null":t++;break;case"number":{i++;let p=(a=h.toString().split(".")[1])==null?void 0:a.length;p&&p>o&&(o=p);break}case"string":l++;break;case"object":h instanceof Date?r++:h===null?t++:s++;break;case"date":r++;break}}let u,f=e+t;return i+f===n.length?u="number":l+f===n.length?u="string":r+f===n.length?u="date":s+f===n.length?u="object":u="unknown",{maxDecimals:o,unitType:u}}}function Ot(n,e="object"){var t,l,i,r;let s,o=[];var a;if(e==="object")for(const[u]of Object.entries(n[0])){t=u,i=Be(n,t),l=i.evidenceType,s=Ae(n,t),r=Oe(u,i,s),a=Fe(n,t);let f={[t]:{title:Ne(t,r),type:l,evidenceColumnType:i,format:r,columnUnitSummary:s,extentsLegacy:a}};o={...o,...f}}else for(const[u]of Object.entries(n[0]))t=u,i=Be(n,t),l=i.evidenceType,s=Ae(n,t),r=Oe(u,i,s),a=Fe(n,t),o.push({id:t,title:Ne(t,r),type:l,evidenceColumnType:i,format:r,columnUnitSummary:s,extentsLegacy:a});return o}function Pe(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function ze(n,e,t){const l=n.slice();return l[15]=e[t],l[17]=t,l}function He(n,e,t){const l=n.slice();return l[18]=e[t],l}function We(n,e,t){const l=n.slice();return l[18]=e[t],l}function Ye(n){let e,t=n[18].id+"",l,i,r,s;return{c(){e=k("th"),l=U(t),this.h()},l(o){e=T(o,"TH",{class:!0,style:!0,evidencetype:!0,evidencetypefidelity:!0});var a=y(e);l=V(a,t),a.forEach(c),this.h()},h(){var o,a;_(e,"class",i=me(n[18].type)+" svelte-f0rlbw"),A(e,"width",n[6]+"%"),_(e,"evidencetype",r=((o=n[18].evidenceColumnType)==null?void 0:o.evidenceType)||"unavailable"),_(e,"evidencetypefidelity",s=((a=n[18].evidenceColumnType)==null?void 0:a.typeFidelity)||"unavailable")},m(o,a){D(o,e,a),b(e,l)},p(o,a){var u,f;a&8&&t!==(t=o[18].id+"")&&z(l,t),a&8&&i!==(i=me(o[18].type)+" svelte-f0rlbw")&&_(e,"class",i),a&64&&A(e,"width",o[6]+"%"),a&8&&r!==(r=((u=o[18].evidenceColumnType)==null?void 0:u.evidenceType)||"unavailable")&&_(e,"evidencetype",r),a&8&&s!==(s=((f=o[18].evidenceColumnType)==null?void 0:f.typeFidelity)||"unavailable")&&_(e,"evidencetypefidelity",s)},d(o){o&&c(e)}}}function Ke(n){let e,t=n[18].type+"",l,i,r,s;return{c(){e=k("th"),l=U(t),this.h()},l(o){e=T(o,"TH",{class:!0,style:!0,evidencetype:!0,evidencetypefidelity:!0});var a=y(e);l=V(a,t),a.forEach(c),this.h()},h(){var o,a;_(e,"class",i=n[18].type+" type-indicator svelte-f0rlbw"),A(e,"width",n[6]+"%"),_(e,"evidencetype",r=((o=n[18].evidenceColumnType)==null?void 0:o.evidenceType)||"unavailable"),_(e,"evidencetypefidelity",s=((a=n[18].evidenceColumnType)==null?void 0:a.typeFidelity)||"unavailable")},m(o,a){D(o,e,a),b(e,l)},p(o,a){var u,f;a&8&&t!==(t=o[18].type+"")&&z(l,t),a&8&&i!==(i=o[18].type+" type-indicator svelte-f0rlbw")&&_(e,"class",i),a&64&&A(e,"width",o[6]+"%"),a&8&&r!==(r=((u=o[18].evidenceColumnType)==null?void 0:u.evidenceType)||"unavailable")&&_(e,"evidencetype",r),a&8&&s!==(s=((f=o[18].evidenceColumnType)==null?void 0:f.typeFidelity)||"unavailable")&&_(e,"evidencetypefidelity",s)},d(o){o&&c(e)}}}function Qt(n){let e=(n[2]+n[14]+1).toLocaleString()+"",t;return{c(){t=U(e)},l(l){t=V(l,e)},m(l,i){D(l,t,i)},p(l,i){i&4&&e!==(e=(l[2]+l[14]+1).toLocaleString()+"")&&z(t,e)},d(l){l&&c(t)}}}function Rt(n){let e=(n[2]+n[14]+1).toLocaleString()+"",t;return{c(){t=U(e)},l(l){t=V(l,e)},m(l,i){D(l,t,i)},p(l,i){i&4&&e!==(e=(l[2]+l[14]+1).toLocaleString()+"")&&z(t,e)},d(l){l&&c(t)}}}function Nt(n){let e,t=(n[15]||"Ø")+"",l;return{c(){e=k("td"),l=U(t),this.h()},l(i){e=T(i,"TD",{class:!0,style:!0});var r=y(e);l=V(r,t),r.forEach(c),this.h()},h(){_(e,"class","other svelte-f0rlbw"),A(e,"width",n[6]+"%")},m(i,r){D(i,e,r),b(e,l)},p(i,r){r&32&&t!==(t=(i[15]||"Ø")+"")&&z(l,t),r&64&&A(e,"width",i[6]+"%")},d(i){i&&c(e)}}}function Bt(n){let e,t,l=(n[15]??"Ø")+"",i,r;return{c(){e=k("td"),t=k("div"),i=U(l),this.h()},l(s){e=T(s,"TD",{class:!0,style:!0,title:!0});var o=y(e);t=T(o,"DIV",{class:!0});var a=y(t);i=V(a,l),a.forEach(c),o.forEach(c),this.h()},h(){_(t,"class","svelte-f0rlbw"),_(e,"class","boolean svelte-f0rlbw"),A(e,"width",n[6]+"%"),_(e,"title",r=n[15])},m(s,o){D(s,e,o),b(e,t),b(t,i)},p(s,o){o&32&&l!==(l=(s[15]??"Ø")+"")&&z(i,l),o&64&&A(e,"width",s[6]+"%"),o&32&&r!==(r=s[15])&&_(e,"title",r)},d(s){s&&c(e)}}}function At(n){let e,t,l=(n[15]||"Ø")+"",i,r;return{c(){e=k("td"),t=k("div"),i=U(l),this.h()},l(s){e=T(s,"TD",{class:!0,style:!0,title:!0});var o=y(e);t=T(o,"DIV",{class:!0});var a=y(t);i=V(a,l),a.forEach(c),o.forEach(c),this.h()},h(){_(t,"class","svelte-f0rlbw"),_(e,"class","string svelte-f0rlbw"),A(e,"width",n[6]+"%"),_(e,"title",r=n[15])},m(s,o){D(s,e,o),b(e,t),b(t,i)},p(s,o){o&32&&l!==(l=(s[15]||"Ø")+"")&&z(i,l),o&64&&A(e,"width",s[6]+"%"),o&32&&r!==(r=s[15])&&_(e,"title",r)},d(s){s&&c(e)}}}function Ft(n){let e,t,l=he(n[15],n[3][n[17]].format,n[3][n[17]].columnUnitSummary)+"",i,r;return{c(){e=k("td"),t=k("div"),i=U(l),this.h()},l(s){e=T(s,"TD",{class:!0,style:!0,title:!0});var o=y(e);t=T(o,"DIV",{class:!0});var a=y(t);i=V(a,l),a.forEach(c),o.forEach(c),this.h()},h(){_(t,"class","svelte-f0rlbw"),_(e,"class","string svelte-f0rlbw"),A(e,"width",n[6]+"%"),_(e,"title",r=he(n[15],n[3][n[17]].format,n[3][n[17]].columnUnitSummary))},m(s,o){D(s,e,o),b(e,t),b(t,i)},p(s,o){o&40&&l!==(l=he(s[15],s[3][s[17]].format,s[3][s[17]].columnUnitSummary)+"")&&z(i,l),o&64&&A(e,"width",s[6]+"%"),o&40&&r!==(r=he(s[15],s[3][s[17]].format,s[3][s[17]].columnUnitSummary))&&_(e,"title",r)},d(s){s&&c(e)}}}function Pt(n){let e,t=he(n[15],n[3][n[17]].format,n[3][n[17]].columnUnitSummary)+"",l;return{c(){e=k("td"),l=U(t),this.h()},l(i){e=T(i,"TD",{class:!0,style:!0});var r=y(e);l=V(r,t),r.forEach(c),this.h()},h(){_(e,"class","number svelte-f0rlbw"),A(e,"width",n[6]+"%")},m(i,r){D(i,e,r),b(e,l)},p(i,r){r&40&&t!==(t=he(i[15],i[3][i[17]].format,i[3][i[17]].columnUnitSummary)+"")&&z(l,t),r&64&&A(e,"width",i[6]+"%")},d(i){i&&c(e)}}}function zt(n){let e,t="Ø",l,i;return{c(){e=k("td"),l=U(t),this.h()},l(r){e=T(r,"TD",{class:!0,style:!0});var s=y(e);l=V(s,t),s.forEach(c),this.h()},h(){_(e,"class",i="null "+n[3][n[17]].type+" svelte-f0rlbw"),A(e,"width",n[6]+"%")},m(r,s){D(r,e,s),b(e,l)},p(r,s){s&8&&i!==(i="null "+r[3][r[17]].type+" svelte-f0rlbw")&&_(e,"class",i),s&64&&A(e,"width",r[6]+"%")},d(r){r&&c(e)}}}function Je(n){let e;function t(r,s){return r[15]==null?zt:r[3][r[17]].type==="number"?Pt:r[3][r[17]].type==="date"?Ft:r[3][r[17]].type==="string"?At:r[3][r[17]].type==="boolean"?Bt:Nt}let l=t(n),i=l(n);return{c(){i.c(),e=_e()},l(r){i.l(r),e=_e()},m(r,s){i.m(r,s),D(r,e,s)},p(r,s){l===(l=t(r))&&i?i.p(r,s):(i.d(1),i=l(r),i&&(i.c(),i.m(e.parentNode,e)))},d(r){i.d(r),r&&c(e)}}}function Xe(n){let e,t,l,i;function r(f,m){return f[14]===0?Rt:Qt}let o=r(n)(n),a=Object.values(n[12]),u=[];for(let f=0;f<a.length;f+=1)u[f]=Je(ze(n,a,f));return{c(){e=k("tr"),t=k("td"),o.c(),l=R();for(let f=0;f<u.length;f+=1)u[f].c();i=R(),this.h()},l(f){e=T(f,"TR",{});var m=y(e);t=T(m,"TD",{class:!0,style:!0});var h=y(t);o.l(h),h.forEach(c),l=N(m);for(let p=0;p<u.length;p+=1)u[p].l(m);i=N(m),m.forEach(c),this.h()},h(){_(t,"class","index svelte-f0rlbw"),A(t,"width","10%")},m(f,m){D(f,e,m),b(e,t),o.m(t,null),b(e,l);for(let h=0;h<u.length;h+=1)u[h].m(e,null);b(e,i)},p(f,m){if(o.p(f,m),m&104){a=Object.values(f[12]);let h;for(h=0;h<a.length;h+=1){const p=ze(f,a,h);u[h]?u[h].p(p,m):(u[h]=Je(p),u[h].c(),u[h].m(e,i))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}},d(f){f&&c(e),o.d(),ge(u,f)}}}function Ge(n){let e,t,l,i,r=(n[2]+se).toLocaleString()+"",s,o,a=(n[4]+se).toLocaleString()+"",u,f,m;return{c(){e=k("div"),t=k("input"),l=R(),i=k("span"),s=U(r),o=U(" of "),u=U(a),this.h()},l(h){e=T(h,"DIV",{class:!0});var p=y(e);t=T(p,"INPUT",{type:!0,max:!0,step:!0,class:!0}),l=N(p),i=T(p,"SPAN",{class:!0});var g=y(i);s=V(g,r),o=V(g," of "),u=V(g,a),g.forEach(c),p.forEach(c),this.h()},h(){_(t,"type","range"),_(t,"max",n[4]),_(t,"step","1"),_(t,"class","slider svelte-f0rlbw"),_(i,"class","svelte-f0rlbw"),_(e,"class","pagination svelte-f0rlbw")},m(h,p){D(h,e,p),b(e,t),Ue(t,n[2]),b(e,l),b(e,i),b(i,s),b(i,o),b(i,u),f||(m=[te(t,"change",n[9]),te(t,"input",n[9]),te(t,"input",n[7])],f=!0)},p(h,p){p&16&&_(t,"max",h[4]),p&4&&Ue(t,h[2]),p&4&&r!==(r=(h[2]+se).toLocaleString()+"")&&z(s,r),p&16&&a!==(a=(h[4]+se).toLocaleString()+"")&&z(u,a)},d(h){h&&c(e),f=!1,lt(m)}}}function Ht(n){let e,t,l,i,r,s,o,a,u,f,m,h,p,g,d,S,Q,G,I,L,Z,C,X,q,E,O,H=n[3],M=[];for(let v=0;v<H.length;v+=1)M[v]=Ye(We(n,H,v));let ee=n[3],W=[];for(let v=0;v<ee.length;v+=1)W[v]=Ke(He(n,ee,v));let de=n[5],Y=[];for(let v=0;v<de.length;v+=1)Y[v]=Xe(Pe(n,de,v));let K=n[4]>0&&Ge(n);return C=new It({props:{class:"download-button",data:n[1],queryID:n[0],display:!0}}),{c(){e=k("div"),t=k("div"),l=k("table"),i=k("thead"),r=k("tr"),s=k("th"),o=R();for(let v=0;v<M.length;v+=1)M[v].c();a=R(),u=k("tr"),f=R(),m=k("tr"),h=k("th"),p=R();for(let v=0;v<W.length;v+=1)W[v].c();g=R(),d=k("tr"),S=R(),Q=k("tbody");for(let v=0;v<Y.length;v+=1)Y[v].c();I=R(),K&&K.c(),L=R(),Z=k("div"),ae(C.$$.fragment),this.h()},l(v){e=T(v,"DIV",{class:!0});var F=y(e);t=T(F,"DIV",{class:!0});var P=y(t);l=T(P,"TABLE",{class:!0});var w=y(l);i=T(w,"THEAD",{});var J=y(i);r=T(J,"TR",{});var pe=y(r);s=T(pe,"TH",{class:!0,style:!0}),y(s).forEach(c),o=N(pe);for(let $=0;$<M.length;$+=1)M[$].l(pe);a=N(pe),pe.forEach(c),u=T(J,"TR",{}),y(u).forEach(c),f=N(J),m=T(J,"TR",{class:!0});var be=y(m);h=T(be,"TH",{class:!0,style:!0}),y(h).forEach(c),p=N(be);for(let $=0;$<W.length;$+=1)W[$].l(be);g=N(be),be.forEach(c),d=T(J,"TR",{}),y(d).forEach(c),J.forEach(c),S=N(w),Q=T(w,"TBODY",{});var Ce=y(Q);for(let $=0;$<Y.length;$+=1)Y[$].l(Ce);Ce.forEach(c),w.forEach(c),P.forEach(c),I=N(F),K&&K.l(F),L=N(F),Z=T(F,"DIV",{class:!0});var Se=y(Z);ue(C.$$.fragment,Se),Se.forEach(c),F.forEach(c),this.h()},h(){_(s,"class","index svelte-f0rlbw"),A(s,"width","10%"),_(h,"class","index type-indicator svelte-f0rlbw"),A(h,"width","10%"),_(m,"class","type-indicator svelte-f0rlbw"),_(l,"class","svelte-f0rlbw"),_(t,"class","container svelte-f0rlbw"),_(Z,"class","footer svelte-f0rlbw"),_(e,"class","results-pane py-1 svelte-f0rlbw")},m(v,F){D(v,e,F),b(e,t),b(t,l),b(l,i),b(i,r),b(r,s),b(r,o);for(let P=0;P<M.length;P+=1)M[P].m(r,null);b(r,a),b(i,u),b(i,f),b(i,m),b(m,h),b(m,p);for(let P=0;P<W.length;P+=1)W[P].m(m,null);b(m,g),b(i,d),b(l,S),b(l,Q);for(let P=0;P<Y.length;P+=1)Y[P].m(Q,null);b(e,I),K&&K.m(e,null),b(e,L),b(e,Z),fe(C,Z,null),q=!0,E||(O=te(Q,"wheel",n[8]),E=!0)},p(v,[F]){if(F&72){H=v[3];let w;for(w=0;w<H.length;w+=1){const J=We(v,H,w);M[w]?M[w].p(J,F):(M[w]=Ye(J),M[w].c(),M[w].m(r,a))}for(;w<M.length;w+=1)M[w].d(1);M.length=H.length}if(F&72){ee=v[3];let w;for(w=0;w<ee.length;w+=1){const J=He(v,ee,w);W[w]?W[w].p(J,F):(W[w]=Ke(J),W[w].c(),W[w].m(m,g))}for(;w<W.length;w+=1)W[w].d(1);W.length=ee.length}if(F&108){de=v[5];let w;for(w=0;w<de.length;w+=1){const J=Pe(v,de,w);Y[w]?Y[w].p(J,F):(Y[w]=Xe(J),Y[w].c(),Y[w].m(Q,null))}for(;w<Y.length;w+=1)Y[w].d(1);Y.length=de.length}v[4]>0?K?K.p(v,F):(K=Ge(v),K.c(),K.m(e,L)):K&&(K.d(1),K=null);const P={};F&2&&(P.data=v[1]),F&1&&(P.queryID=v[0]),C.$set(P)},i(v){q||(G||oe(()=>{G=tt(l,nt,{}),G.start()}),j(C.$$.fragment,v),v&&oe(()=>{X||(X=x(e,ne,{},!0)),X.run(1)}),q=!0)},o(v){B(C.$$.fragment,v),v&&(X||(X=x(e,ne,{},!1)),X.run(0)),q=!1},d(v){v&&c(e),ge(M,v),ge(W,v),ge(Y,v),K&&K.d(),ce(C),v&&X&&X.end(),E=!1,O()}}}let se=5;function Wt(n,e,t){let l,i,r,s,{queryID:o}=e,{data:a}=e,u=0,f;function m(){f=a.slice(u,u+se),t(5,s=f)}const h=wt(d=>{t(2,u=Math.min(Math.max(0,u+Math.floor(d.deltaY/Math.abs(d.deltaY))),r)),m()},60);function p(d){if(Math.abs(d.deltaX)>=Math.abs(d.deltaY))return;const S=d.deltaY<0&&u===0,Q=d.deltaY>0&&u===r;S||Q||(d.preventDefault(),h(d))}function g(){u=pt(this.value),t(2,u)}return n.$$set=d=>{"queryID"in d&&t(0,o=d.queryID),"data"in d&&t(1,a=d.data)},n.$$.update=()=>{n.$$.dirty&2&&t(3,l=Ot(a,"array")),n.$$.dirty&8&&t(6,i=90/(l.length+1)),n.$$.dirty&2&&t(4,r=Math.max(a.length-se,0)),n.$$.dirty&6&&t(5,s=a.slice(u,u+se))},[o,a,u,l,r,s,i,m,p,g]}class Yt extends ye{constructor(e){super(),we(this,e,Wt,Ht,ke,{queryID:0,data:1})}}function Kt(n){let e,t,l,i,r,s,o;return{c(){e=k("button"),t=U("Compiled"),l=R(),i=k("button"),r=U("Written"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var u=y(e);t=V(u,"Compiled"),u.forEach(c),l=N(a),i=T(a,"BUTTON",{class:!0});var f=y(i);r=V(f,"Written"),f.forEach(c),this.h()},h(){_(e,"class","off svelte-1b8idd8"),_(i,"class","on svelte-1b8idd8")},m(a,u){D(a,e,u),b(e,t),D(a,l,u),D(a,i,u),b(i,r),s||(o=te(e,"click",n[1]),s=!0)},p:le,d(a){a&&c(e),a&&c(l),a&&c(i),s=!1,o()}}}function Jt(n){let e,t,l,i,r,s,o;return{c(){e=k("button"),t=U("Compiled"),l=R(),i=k("button"),r=U("Written"),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var u=y(e);t=V(u,"Compiled"),u.forEach(c),l=N(a),i=T(a,"BUTTON",{class:!0});var f=y(i);r=V(f,"Written"),f.forEach(c),this.h()},h(){_(e,"class","on svelte-1b8idd8"),_(i,"class","off svelte-1b8idd8")},m(a,u){D(a,e,u),b(e,t),D(a,l,u),D(a,i,u),b(i,r),s||(o=te(i,"click",n[1]),s=!0)},p:le,d(a){a&&c(e),a&&c(l),a&&c(i),s=!1,o()}}}function Xt(n){let e,t,l;function i(o,a){return o[0]?Jt:Kt}let r=i(n),s=r(n);return{c(){e=k("div"),s.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var a=y(e);s.l(a),a.forEach(c),this.h()},h(){_(e,"class","toggle svelte-1b8idd8")},m(o,a){D(o,e,a),s.m(e,null),l=!0},p(o,[a]){r===(r=i(o))&&s?s.p(o,a):(s.d(1),s=r(o),s&&(s.c(),s.m(e,null)))},i(o){l||(o&&oe(()=>{t||(t=x(e,ne,{},!0)),t.run(1)}),l=!0)},o(o){o&&(t||(t=x(e,ne,{},!1)),t.run(0)),l=!1},d(o){o&&c(e),s.d(),o&&t&&t.end()}}}function Gt(n,e,t){let{showCompiled:l}=e;const i=function(){t(0,l=!l)};return n.$$set=r=>{"showCompiled"in r&&t(0,l=r.showCompiled)},[l,i]}class Zt extends ye{constructor(e){super(),we(this,e,Gt,Xt,ke,{showCompiled:0})}}function Ze(n){let e,t,l,i,r,s,o,a,u,f,m,h,p,g,d,S,Q,G;i=new rt({props:{toggled:n[10]}});let I=n[10]&&n[6]&&$e(n),L=n[10]&&xe(n);const Z=[ll,tl,el],C=[];function X(E,O){return E[2]?0:E[3]>0?1:2}m=X(n),h=C[m]=Z[m](n);let q=n[1].length>0&&!n[2]&&n[9]&&et(n);return{c(){e=k("div"),t=k("div"),l=k("button"),ae(i.$$.fragment),r=R(),s=U(n[0]),o=R(),I&&I.c(),a=R(),L&&L.c(),u=R(),f=k("button"),h.c(),g=R(),q&&q.c(),this.h()},l(E){e=T(E,"DIV",{class:!0});var O=y(e);t=T(O,"DIV",{class:!0});var H=y(t);l=T(H,"BUTTON",{type:!0,"aria-label":!0,class:!0});var M=y(l);ue(i.$$.fragment,M),r=N(M),s=V(M,n[0]),M.forEach(c),o=N(H),I&&I.l(H),a=N(H),L&&L.l(H),H.forEach(c),u=N(O),f=T(O,"BUTTON",{type:!0,"aria-label":!0,class:!0});var ee=y(f);h.l(ee),ee.forEach(c),g=N(O),q&&q.l(O),O.forEach(c),this.h()},h(){_(l,"type","button"),_(l,"aria-label","show-sql"),_(l,"class","title svelte-18founi"),_(t,"class","container-a svelte-18founi"),_(f,"type","button"),_(f,"aria-label","view-query"),_(f,"class",p=me("status-bar"+(n[2]?" error":" success")+(n[9]?" open":" closed"))+" svelte-18founi"),_(e,"class","container svelte-18founi")},m(E,O){D(E,e,O),b(e,t),b(t,l),fe(i,l,null),b(l,r),b(l,s),b(t,o),I&&I.m(t,null),b(t,a),L&&L.m(t,null),b(e,u),b(e,f),C[m].m(f,null),b(e,g),q&&q.m(e,null),S=!0,Q||(G=[te(l,"click",n[13]),te(f,"click",n[15])],Q=!0)},p(E,O){const H={};O&1024&&(H.toggled=E[10]),i.$set(H),(!S||O&1)&&z(s,E[0]),E[10]&&E[6]?I?(I.p(E,O),O&1088&&j(I,1)):(I=$e(E),I.c(),j(I,1),I.m(t,a)):I&&(ie(),B(I,1,1,()=>{I=null}),re()),E[10]?L?(L.p(E,O),O&1024&&j(L,1)):(L=xe(E),L.c(),j(L,1),L.m(t,null)):L&&(ie(),B(L,1,1,()=>{L=null}),re());let M=m;m=X(E),m===M?C[m].p(E,O):(ie(),B(C[M],1,1,()=>{C[M]=null}),re(),h=C[m],h?h.p(E,O):(h=C[m]=Z[m](E),h.c()),j(h,1),h.m(f,null)),(!S||O&516&&p!==(p=me("status-bar"+(E[2]?" error":" success")+(E[9]?" open":" closed"))+" svelte-18founi"))&&_(f,"class",p),E[1].length>0&&!E[2]&&E[9]?q?(q.p(E,O),O&518&&j(q,1)):(q=et(E),q.c(),j(q,1),q.m(e,null)):q&&(ie(),B(q,1,1,()=>{q=null}),re())},i(E){S||(j(i.$$.fragment,E),j(I),j(L),j(h),j(q),E&&oe(()=>{d||(d=x(e,ne,{},!0)),d.run(1)}),S=!0)},o(E){B(i.$$.fragment,E),B(I),B(L),B(h),B(q),E&&(d||(d=x(e,ne,{},!1)),d.run(0)),S=!1},d(E){E&&c(e),ce(i),I&&I.d(),L&&L.d(),C[m].d(),q&&q.d(),E&&d&&d.end(),Q=!1,lt(G)}}}function $e(n){let e,t,l;function i(s){n[18](s)}let r={};return n[7]!==void 0&&(r.showCompiled=n[7]),e=new Zt({props:r}),bt.push(()=>vt(e,"showCompiled",i,n[7])),{c(){ae(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,o){fe(e,s,o),l=!0},p(s,o){const a={};!t&&o&128&&(t=!0,a.showCompiled=s[7],gt(()=>t=!1)),e.$set(a)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){B(e.$$.fragment,s),l=!1},d(s){ce(e,s)}}}function xe(n){let e,t,l,i,r;const s=[xt,$t],o=[];function a(u,f){return u[7]?0:1}return t=a(n),l=o[t]=s[t](n),{c(){e=k("div"),l.c(),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=y(e);l.l(f),f.forEach(c),this.h()},h(){_(e,"class","code-container svelte-18founi")},m(u,f){D(u,e,f),o[t].m(e,null),r=!0},p(u,f){let m=t;t=a(u),t===m?o[t].p(u,f):(ie(),B(o[m],1,1,()=>{o[m]=null}),re(),l=o[t],l?l.p(u,f):(l=o[t]=s[t](u),l.c()),j(l,1),l.m(e,null))},i(u){r||(j(l),u&&oe(()=>{i||(i=x(e,ne,{},!0)),i.run(1)}),r=!0)},o(u){B(l),u&&(i||(i=x(e,ne,{},!1)),i.run(0)),r=!1},d(u){u&&c(e),o[t].d(),u&&i&&i.end()}}}function $t(n){let e,t;return e=new st({props:{code:n[4]}}),{c(){ae(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,i){fe(e,l,i),t=!0},p(l,i){const r={};i&16&&(r.code=l[4]),e.$set(r)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){ce(e,l)}}}function xt(n){let e,t;return e=new st({props:{code:n[5]}}),{c(){ae(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,i){fe(e,l,i),t=!0},p(l,i){const r={};i&32&&(r.code=l[5]),e.$set(r)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){ce(e,l)}}}function el(n){let e;return{c(){e=U("ran successfully but no data was returned")},l(t){e=V(t,"ran successfully but no data was returned")},m(t,l){D(t,e,l)},p:le,i:le,o:le,d(t){t&&c(e)}}}function tl(n){let e,t,l=n[3].toLocaleString()+"",i,r,s=n[3]>1?"records":"record",o,a,u=n[8].toLocaleString()+"",f,m,h=n[8]>1?"properties":"property",p,g;return e=new rt({props:{toggled:n[9],color:"#3488e9"}}),{c(){ae(e.$$.fragment),t=R(),i=U(l),r=R(),o=U(s),a=U(" with "),f=U(u),m=R(),p=U(h)},l(d){ue(e.$$.fragment,d),t=N(d),i=V(d,l),r=N(d),o=V(d,s),a=V(d," with "),f=V(d,u),m=N(d),p=V(d,h)},m(d,S){fe(e,d,S),D(d,t,S),D(d,i,S),D(d,r,S),D(d,o,S),D(d,a,S),D(d,f,S),D(d,m,S),D(d,p,S),g=!0},p(d,S){const Q={};S&512&&(Q.toggled=d[9]),e.$set(Q),(!g||S&8)&&l!==(l=d[3].toLocaleString()+"")&&z(i,l),(!g||S&8)&&s!==(s=d[3]>1?"records":"record")&&z(o,s),(!g||S&256)&&u!==(u=d[8].toLocaleString()+"")&&z(f,u),(!g||S&256)&&h!==(h=d[8]>1?"properties":"property")&&z(p,h)},i(d){g||(j(e.$$.fragment,d),g=!0)},o(d){B(e.$$.fragment,d),g=!1},d(d){ce(e,d),d&&c(t),d&&c(i),d&&c(r),d&&c(o),d&&c(a),d&&c(f),d&&c(m),d&&c(p)}}}function ll(n){let e=n[2].message+"",t,l,i;function r(a,u){if(a[2].message==="Missing database connection; set the EVIDENCE_DATABASE environment variable.")return nl}let s=r(n),o=s&&s(n);return{c(){t=U(e),l=R(),o&&o.c(),i=_e()},l(a){t=V(a,e),l=N(a),o&&o.l(a),i=_e()},m(a,u){D(a,t,u),D(a,l,u),o&&o.m(a,u),D(a,i,u)},p(a,u){u&4&&e!==(e=a[2].message+"")&&z(t,e),s!==(s=r(a))&&(o&&o.d(1),o=s&&s(a),o&&(o.c(),o.m(i.parentNode,i)))},i:le,o:le,d(a){a&&c(t),a&&c(l),o&&o.d(a),a&&c(i)}}}function nl(n){let e,t;return{c(){e=k("a"),t=U("View environment variables →"),this.h()},l(l){e=T(l,"A",{class:!0,href:!0});var i=y(e);t=V(i,"View environment variables →"),i.forEach(c),this.h()},h(){_(e,"class","credentials-link svelte-18founi"),_(e,"href","https://docs.evidence.dev/cli/#environment-variables")},m(l,i){D(l,e,i),b(e,t)},d(l){l&&c(e)}}}function et(n){let e,t;return e=new Yt({props:{data:n[1],queryID:n[0]}}),{c(){ae(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,i){fe(e,l,i),t=!0},p(l,i){const r={};i&2&&(r.data=l[1]),i&1&&(r.queryID=l[0]),e.$set(r)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){ce(e,l)}}}function il(n){let e,t,l,i=n[11]&&Ze(n);return{c(){e=k("div"),i&&i.c(),this.h()},l(r){e=T(r,"DIV",{class:!0});var s=y(e);i&&i.l(s),s.forEach(c),this.h()},h(){_(e,"class","over-container svelte-18founi")},m(r,s){D(r,e,s),i&&i.m(e,null),l=!0},p(r,[s]){r[11]?i?(i.p(r,s),s&2048&&j(i,1)):(i=Ze(r),i.c(),j(i,1),i.m(e,null)):i&&(ie(),B(i,1,1,()=>{i=null}),re())},i(r){l||(j(i),r&&(t||oe(()=>{t=tt(e,nt,{}),t.start()})),l=!0)},o(r){B(i),l=!1},d(r){r&&c(e),i&&i.d()}}}function rl(n,e,t){let l,i,r;Te(n,Tt,C=>t(11,r=C));let{queryID:s}=e,{pageQueries:o}=e,{queryResult:a}=e,u=Qe(localStorage.getItem("showSQL_".concat(s))==="true"||!1);Te(n,u,C=>t(10,i=C)),u.subscribe(C=>localStorage.setItem("showSQL_".concat(s),C));const f=function(){Ve(u,i=!i,i)};let m=Qe(localStorage.getItem("showResults_".concat(s))==="true"||!1);Te(n,m,C=>t(9,l=C)),m.subscribe(C=>localStorage.setItem("showResults_".concat(s),C));const h=function(){!G&&I>0&&Ve(m,l=!l,l)};let p,g,d,S,Q=!0,G,I,L;function Z(C){Q=C,t(7,Q)}return n.$$set=C=>{"queryID"in C&&t(0,s=C.queryID),"pageQueries"in C&&t(16,o=C.pageQueries),"queryResult"in C&&t(1,a=C.queryResult)},n.$$.update=()=>{var C,X;n.$$.dirty&196623&&(t(17,p=o.filter(q=>q.id===s)),t(4,g=p[0].inputQueryString),t(5,d=p[0].compiledQueryString),t(6,S=p[0].compiled&&p[0].compileError===void 0),t(2,G=(X=(C=a[0])==null?void 0:C.error_object)==null?void 0:X.error),t(3,I=null),t(8,L=null),G||(t(3,I=a.length),I>0&&t(8,L=Object.keys(a[0]).length)))},[s,a,G,I,g,d,S,Q,L,l,i,r,u,f,m,h,o,p,Z]}class cl extends ye{constructor(e){super(),we(this,e,rl,il,ke,{queryID:0,pageQueries:16,queryResult:1})}}const dl=Symbol(),hl={}.VITE_BUILD_STRICT==="true";function _l(n,e,t){var r,s,o,a,u;let l=[];if(n==null)throw Error("No dataset provided");if(typeof n!="object")throw Error("'"+n+"' is not a recognized query result. Data should be provided in the format: data = {"+n.replace("data.","")+"}");if(n[0]==null)throw Error("Dataset is empty: query ran successfully, but no data was returned from the database");if(((s=(r=n[0])==null?void 0:r.error_object)==null?void 0:s.error)!=null)throw Error("SQL Error: "+((u=(a=(o=n[0])==null?void 0:o.error_object)==null?void 0:a.error)==null?void 0:u.message));if(e!=null){if(!(e instanceof Array))throw Error("reqCols must be passed in as an array");for(var i=0;i<e.length;i++)if(e[i]==null)throw Error("Missing required columns");for(const[m]of Object.entries(n[0]))l.push(m);let f;for(i=0;i<e.length;i++)if(f=e[i],!l.includes(f))throw Error("'"+f+"' is not a column in the dataset");if(t!=null&&t[0]!=null){for(i=0;i<t.length;i++)if(f=t[i],!l.includes(f))throw Error("'"+f+"' is not a column in the dataset")}}}export{It as D,cl as Q,_l as c,Ot as g,dl as p,hl as s};
