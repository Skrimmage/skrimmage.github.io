import{S as Y,i as Z,s as F,e as E,a as z,d as S,g as C,f as h,c as V,k as y,m as k,n as w,Z as te,x as A,z as p,A as H,B as g,C as T,_ as re,$ as se,U as ne,G as Q,H as q,I as B,J as D,b as v,t as I,j as P,T as le,X as ie,Y as N,o as K,V as ae,a0 as oe}from"../chunks/index.fa6138d3.js";import{s as ue,b as fe}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.31f4b306.js";import{b as O}from"../chunks/index.9fc76e2f.js";import"../chunks/paths.40e1d2e8.js";import{s as j}from"../chunks/index.a5cc338a.js";import{B as G}from"../chunks/Button.63889760.js";import{D as ce}from"../chunks/DataTable.d8ad7664.js";import{E as J,a as M,P as de}from"../chunks/Icon.12882af5.js";function U(l){let e,t,r,n,s;return t=new G({props:{size:"sm",outline:!0,icon:l[1]?J:M,$$slots:{default:[he]},$$scope:{ctx:l}}}),t.$on("click",l[10]),n=new G({props:{size:"sm",variant:"success",outline:!0,icon:de,$$slots:{default:[be]},$$scope:{ctx:l}}}),n.$on("click",l[11]),{c(){e=E("div"),Q(t.$$.fragment),r=z(),Q(n.$$.fragment),this.h()},l(i){e=S(i,"DIV",{class:!0});var f=C(e);q(t.$$.fragment,f),r=V(f),q(n.$$.fragment,f),f.forEach(h),this.h()},h(){y(e,"class","absolute bottom-2 right-2 z-10 flex gap-2")},m(i,f){k(i,e,f),B(t,e,null),w(e,r),B(n,e,null),s=!0},p(i,f){const _={};f&2&&(_.icon=i[1]?J:M),f&32770&&(_.$$scope={dirty:f,ctx:i}),t.$set(_);const b={};f&32768&&(b.$$scope={dirty:f,ctx:i}),n.$set(b)},i(i){s||(p(t.$$.fragment,i),p(n.$$.fragment,i),s=!0)},o(i){g(t.$$.fragment,i),g(n.$$.fragment,i),s=!1},d(i){i&&h(e),D(t),D(n)}}}function me(l){let e;return{c(){e=I("Show Results")},l(t){e=P(t,"Show Results")},m(t,r){k(t,e,r)},d(t){t&&h(e)}}}function _e(l){let e;return{c(){e=I("Hide Results")},l(t){e=P(t,"Hide Results")},m(t,r){k(t,e,r)},d(t){t&&h(e)}}}function he(l){let e;function t(s,i){return s[1]?_e:me}let r=t(l),n=r(l);return{c(){n.c(),e=v()},l(s){n.l(s),e=v()},m(s,i){n.m(s,i),k(s,e,i)},p(s,i){r!==(r=t(s))&&(n.d(1),n=r(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){n.d(s),s&&h(e)}}}function be(l){let e;return{c(){e=I("Submit")},l(t){e=P(t,"Submit")},m(t,r){k(t,e,r)},d(t){t&&h(e)}}}function W(l){let e,t=l[8].error+"",r;return{c(){e=E("pre"),r=I(t),this.h()},l(n){e=S(n,"PRE",{class:!0});var s=C(e);r=P(s,t),s.forEach(h),this.h()},h(){y(e,"class","text-red-500 text-xs font-mono")},m(n,s){k(n,e,s),w(e,r)},p(n,s){s&256&&t!==(t=n[8].error+"")&&le(r,t)},d(n){n&&h(e)}}}function X(l){let e,t,r,n;return t=new ce({props:{data:l[8]}}),{c(){e=E("div"),Q(t.$$.fragment)},l(s){e=S(s,"DIV",{});var i=C(e);q(t.$$.fragment,i),i.forEach(h)},m(s,i){k(s,e,i),B(t,e,null),n=!0},p(s,i){const f={};i&256&&(f.data=s[8]),t.$set(f)},i(s){n||(p(t.$$.fragment,s),ie(()=>{r||(r=N(e,j,{},!0)),r.run(1)}),n=!0)},o(s){g(t.$$.fragment,s),r||(r=N(e,j,{},!1)),r.run(0),n=!1},d(s){s&&h(e),D(t),s&&r&&r.end()}}}function pe(l){let e,t,r,n,s=l[8].error&&!l[2]&&!!l[4],i,f,_,b,a=!l[3]&&U(l),c=s&&W(l),u=l[1]&&X(l);return{c(){e=E("section"),t=E("div"),a&&a.c(),n=z(),c&&c.c(),i=z(),u&&u.c(),this.h()},l(o){e=S(o,"SECTION",{class:!0,"aria-roledescription":!0});var d=C(e);t=S(d,"DIV",{class:!0});var R=C(t);a&&a.l(R),R.forEach(h),n=V(d),c&&c.l(d),i=V(d),u&&u.l(d),d.forEach(h),this.h()},h(){y(t,"class","w-full relative rounded border border-gray-300 min-h-[8rem] cursor-text"),y(e,"class","px-4 py-2 bg-white flex flex-col gap-2 min-h-[8rem] svelte-1bw0fbe"),y(e,"aria-roledescription","Code Editor")},m(o,d){k(o,e,d),w(e,t),a&&a.m(t,null),l[12](t),w(e,n),c&&c.m(e,null),w(e,i),u&&u.m(e,null),f=!0,_||(b=[te(r=ue.call(null,t,l[5])),A(e,"click",l[13]),A(e,"keydown",l[14])],_=!0)},p(o,[d]){o[3]?a&&(H(),g(a,1,1,()=>{a=null}),T()):a?(a.p(o,d),d&8&&p(a,1)):(a=U(o),a.c(),p(a,1),a.m(t,null)),r&&re(r.update)&&d&32&&r.update.call(null,o[5]),d&276&&(s=o[8].error&&!o[2]&&!!o[4]),s?c?c.p(o,d):(c=W(o),c.c(),c.m(e,i)):c&&(c.d(1),c=null),o[1]?u?(u.p(o,d),d&2&&p(u,1)):(u=X(o),u.c(),p(u,1),u.m(e,null)):u&&(H(),g(u,1,1,()=>{u=null}),T())},i(o){f||(p(a),p(u),f=!0)},o(o){g(a),g(u),f=!1},d(o){o&&h(e),a&&a.d(),l[12](null),c&&c.d(),u&&u.d(),_=!1,se(b)}}}function ge(l,e,t){let r,n=K,s=()=>(n(),n=ae(u,m=>t(8,r=m)),u);l.$$.on_destroy.push(()=>n());let{hideErrors:i=!1}=e,{initialQuery:f=""}=e,{showResults:_=!0}=e,{disabled:b=!1}=e,a=f,c=a,{data:u=O(a)}=e;s();let o,d;ne(async()=>{u&&u.fetch(),t(5,d={initialState:f,disabled:b,schema:await fe(),onChange:m=>{m.docChanged&&c.trim()!==m.state.doc.toString().trim()&&t(6,c=m.state.doc.toString())},onSubmit:()=>(t(4,a=c.trim()),a.endsWith(";")&&t(4,a=a.substring(0,a.length-1)),t(1,_=!0),!0)})});const R=()=>t(1,_=!_),L=()=>{t(4,a=c),t(1,_=!0)};function $(m){oe[m?"unshift":"push"](()=>{o=m,t(7,o)})}const x=()=>o==null?void 0:o.focus(),ee=m=>m.key==="Enter"&&(o==null?void 0:o.focus());return l.$$set=m=>{"hideErrors"in m&&t(2,i=m.hideErrors),"initialQuery"in m&&t(9,f=m.initialQuery),"showResults"in m&&t(1,_=m.showResults),"disabled"in m&&t(3,b=m.disabled),"data"in m&&s(t(0,u=m.data))},l.$$.update=()=>{l.$$.dirty&17&&a&&(s(t(0,u=O(a))),u.fetch()),l.$$.dirty&40&&d&&t(5,d.disabled=b,d)},[u,_,i,b,a,d,c,o,r,f,R,L,$,x,ee]}class ke extends Y{constructor(e){super(),Z(this,e,ge,pe,F,{hideErrors:2,initialQuery:9,showResults:1,disabled:3,data:0})}}function ye(l){let e,t;return e=new ke({}),{c(){Q(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,n){B(e,r,n),t=!0},p:K,i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}class De extends Y{constructor(e){super(),Z(this,e,null,ye,F,{})}}export{De as component};
